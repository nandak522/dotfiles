syntax enable       "Enable syntax hl
set showmatch       "Show matching bracets when text indicator is over them
set ruler           "Always show current position
filetype plugin indent on

"--- Text, tab and ident related ------------
set tabstop=4
set shiftwidth=4
set expandtab
set textwidth=80
set autoindent
set copyindent
set smartindent
set backspace=indent,eol,start
let mapleader="'"

"--- Vim UI related -------------
set colorcolumn=80 " Mark 80th column with a red line
set wildmenu
set cmdheight=1
set nu
set mouse=ni
set showtabline=2
nnoremap <silent> <F6> :cnewer<CR>
set statusline=%<%F\ %m%r%h%w%l,%c
vmap > >gv
vmap < <gv
highlight def link csvHeading Type
syntax match csvHeading /\%1l\%(\%("\zs\%([^"]\|""\)*\ze"\)\|\%(\zs[^,"]*\ze\)\)/
noremap <F4> :set hls!<CR>
set paste

"--- Tabs related ---------------
map <C-t><up> :tabr<cr>
map <C-t><down> :tabl<cr>
map <C-t><left> :tabp<cr>
map <C-t><right> :tabn<cr>
"set scb

"--- search options ------------
set incsearch       " show 'best match so far' as you type
set nohlsearch      " hilight the items found by the search
set ignorecase      " ignores case of letters on searches
set smartcase       " Override the 'ignorecase' option if the search pattern contains upper case characters

"--- NERDTree related --------
autocmd VimEnter * NERDTree
autocmd VimEnter * wincmd l
autocmd BufEnter * NERDTreeMirror
let NERDTreeIgnore=['\.pyc']

"--- Enable omni completion.
autocmd FileType css set omnifunc=csscomplete#CompleteCSS
autocmd FileType html,markdown,ctp set omnifunc=htmlcomplete#CompleteTags
autocmd FileType javascript set omnifunc=javascriptcomplete#CompleteJS
autocmd FileType python set omnifunc=pythoncomplete#Complete
autocmd FileType xml set omnifunc=xmlcomplete#CompleteTags

" FuzzFinder Shorcuts. Using F2 for opening FuzzyFinderTextMate
map <leader>f :FufFileWithCurrentBufferDir<CR>
map <leader>m :FufFileWithFullCwd<CR>
map <leader>b :FufBuffer<CR>

" Set default environment based on current edited files
autocmd BufEnter * silent! lcd %:p:h
highlight SpellBad term=reverse ctermbg=4 ctermfg=white

"--- ConqueTerm related ----
map <leader>ct :ConqueTerm bash<CR>

" Turn backup off, since most stuff is in git anyway...
set nobackup
set nowb
set noswapfile

" --- Folds ------
au FileType xml setlocal foldmethod=syntax
au FileType python setlocal foldmethod=indent

"remove trailing whitespace
"http://vim.wikia.com/wiki/Remove_unwanted_spaces#Automatically_removing_all_trailing_whitespace
autocmd BufWritePre *.py :%s/\s\+$//e
autocmd BufWritePre *.html :%s/\s\+$//e
